"use strict";(self.webpackChunkconstraTech=self.webpackChunkconstraTech||[]).push([[209],{8209:(U,u,o)=>{o.r(u),o.d(u,{VisitorsModule:()=>J});var l=o(177),g=o(803),_=o(5668),v=o(8032),p=o.n(v),t=o(7705),F=o(7886),C=o(7377),d=o(9115),m=o(9417),f=o(2510),h=o(8834);function j(i,e){1&i&&(t.j41(0,"div",8)(1,"div",9)(2,"span",10),t.EFF(3,"Loading..."),t.k0s()()())}function R(i,e){1&i&&(t.j41(0,"div",11),t.EFF(1," We encountered an issue while fetching the requested data. Please try again later. If the issue persists, contact support. "),t.k0s())}function k(i,e){if(1&i&&(t.j41(0,"ng-option",17),t.EFF(1),t.k0s()),2&i){const s=e.$implicit;t.Y8G("value",s),t.R7$(1),t.SpI(" ",s," ")}}function E(i,e){1&i&&(t.j41(0,"div")(1,"p",18),t.EFF(2,"Currently, there is no information to show."),t.k0s()())}function V(i,e){if(1&i&&(t.j41(0,"p",31),t.EFF(1),t.k0s()),2&i){const s=t.XpG().$implicit;t.R7$(1),t.SpI(" ",null==s||null==s.payment?null:s.payment.TransactionStatus," ")}}function b(i,e){1&i&&(t.j41(0,"p",32),t.EFF(1," - "),t.k0s())}function $(i,e){if(1&i&&(t.j41(0,"a",33),t.EFF(1,"facebook"),t.k0s()),2&i){const s=t.XpG().$implicit;t.FS9("href",s.facebook,t.B4B)}}function x(i,e){if(1&i&&(t.j41(0,"a",33),t.EFF(1,"linkedin"),t.k0s()),2&i){const s=t.XpG().$implicit;t.FS9("href",s.linkedin,t.B4B)}}function G(i,e){if(1&i&&(t.j41(0,"a",33),t.EFF(1,"website"),t.k0s()),2&i){const s=t.XpG().$implicit;t.FS9("href",s.website,t.B4B)}}function M(i,e){if(1&i){const s=t.RV6();t.j41(0,"a",34),t.bIt("click",function(){t.eBV(s);const r=t.XpG().$implicit,c=t.XpG(3);return t.Njj(c.confirmVisitor("Confirmed",r._id))}),t.j41(1,"p",35),t.EFF(2,"confirm "),t.k0s()()}}function Y(i,e){if(1&i){const s=t.RV6();t.j41(0,"a",34),t.bIt("click",function(){t.eBV(s);const r=t.XpG().$implicit,c=t.XpG(3);return t.Njj(c.confirmVisitor("Rejected",r._id))}),t.j41(1,"p",35),t.EFF(2,"reject "),t.k0s()()}}const a=function(i,e,s){return{"bg-pending":i,"bg-rejected":e,"bg-confirmed":s}};function y(i,e){if(1&i&&(t.j41(0,"tr")(1,"td",22),t.EFF(2),t.k0s(),t.j41(3,"td",22),t.EFF(4),t.k0s(),t.j41(5,"td",22),t.EFF(6),t.k0s(),t.j41(7,"td",22),t.EFF(8),t.k0s(),t.j41(9,"td",22),t.EFF(10),t.k0s(),t.j41(11,"td",22),t.EFF(12),t.k0s(),t.j41(13,"td",22),t.EFF(14),t.k0s(),t.j41(15,"td",22),t.DNE(16,V,2,1,"p",23),t.DNE(17,b,2,0,"p",24),t.k0s(),t.j41(18,"td",22),t.DNE(19,$,2,1,"a",25),t.k0s(),t.j41(20,"td",22),t.DNE(21,x,2,1,"a",25),t.k0s(),t.j41(22,"td",22),t.DNE(23,G,2,1,"a",25),t.k0s(),t.j41(24,"td",26)(25,"button",27),t.nrm(26,"i",28),t.k0s(),t.j41(27,"mat-menu",null,29),t.DNE(29,M,3,0,"a",30),t.DNE(30,Y,3,0,"a",30),t.k0s()()()),2&i){const s=e.$implicit,n=e.index,r=t.sdS(28);t.R7$(1),t.Y8G("ngClass",t.sMw(27,a,"Pending"==s.status,"Rejected"==s.status,"Confirmed"==s.status)),t.R7$(1),t.JRh(n+1),t.R7$(1),t.Y8G("ngClass",t.sMw(31,a,"Pending"==s.status,"Rejected"==s.status,"Confirmed"==s.status)),t.R7$(1),t.JRh(s.company_name),t.R7$(1),t.Y8G("ngClass",t.sMw(35,a,"Pending"==s.status,"Rejected"==s.status,"Confirmed"==s.status)),t.R7$(1),t.JRh(s.fullname),t.R7$(1),t.Y8G("ngClass",t.sMw(39,a,"Pending"==s.status,"Rejected"==s.status,"Confirmed"==s.status)),t.R7$(1),t.JRh(s.email),t.R7$(1),t.Y8G("ngClass",t.sMw(43,a,"Pending"==s.status,"Rejected"==s.status,"Confirmed"==s.status)),t.R7$(1),t.JRh(s.mobile_no),t.R7$(1),t.Y8G("ngClass",t.sMw(47,a,"Pending"==s.status,"Rejected"==s.status,"Confirmed"==s.status)),t.R7$(1),t.JRh(s.position),t.R7$(1),t.Y8G("ngClass",t.sMw(51,a,"Pending"==s.status,"Rejected"==s.status,"Confirmed"==s.status)),t.R7$(1),t.JRh(s.status),t.R7$(1),t.Y8G("ngClass",t.sMw(55,a,"Pending"==s.status,"Rejected"==s.status,"Confirmed"==s.status)),t.R7$(1),t.Y8G("ngIf",s.payment),t.R7$(1),t.Y8G("ngIf",!s.payment),t.R7$(1),t.Y8G("ngClass",t.sMw(59,a,"Pending"==s.status,"Rejected"==s.status,"Confirmed"==s.status)),t.R7$(1),t.Y8G("ngIf",s.facebook),t.R7$(1),t.Y8G("ngClass",t.sMw(63,a,"Pending"==s.status,"Rejected"==s.status,"Confirmed"==s.status)),t.R7$(1),t.Y8G("ngIf",s.linkedin),t.R7$(1),t.Y8G("ngClass",t.sMw(67,a,"Pending"==s.status,"Rejected"==s.status,"Confirmed"==s.status)),t.R7$(1),t.Y8G("ngIf",s.website),t.R7$(1),t.Y8G("ngClass",t.sMw(71,a,"Pending"==s.status,"Rejected"==s.status,"Confirmed"==s.status)),t.R7$(1),t.Y8G("matMenuTriggerFor",r),t.R7$(4),t.Y8G("ngIf","Rejected"==s.status||"Pending"==s.status),t.R7$(1),t.Y8G("ngIf","Confirmed"==s.status||"Pending"==s.status)}}function I(i,e){if(1&i&&(t.j41(0,"div",19)(1,"table",20)(2,"thead")(3,"tr")(4,"th"),t.EFF(5,"#"),t.k0s(),t.j41(6,"th"),t.EFF(7,"Company"),t.k0s(),t.j41(8,"th"),t.EFF(9,"Name"),t.k0s(),t.j41(10,"th"),t.EFF(11,"Email"),t.k0s(),t.j41(12,"th"),t.EFF(13,"Mobile"),t.k0s(),t.j41(14,"th"),t.EFF(15,"Position"),t.k0s(),t.j41(16,"th"),t.EFF(17,"Status"),t.k0s(),t.j41(18,"th"),t.EFF(19,"Payment"),t.k0s(),t.j41(20,"th"),t.EFF(21,"Facebook"),t.k0s(),t.j41(22,"th"),t.EFF(23,"Linkedin"),t.k0s(),t.j41(24,"th"),t.EFF(25,"Website"),t.k0s(),t.nrm(26,"th"),t.k0s()(),t.j41(27,"tbody"),t.DNE(28,y,31,75,"tr",21),t.k0s()()()),2&i){const s=t.XpG(2);t.R7$(28),t.Y8G("ngForOf",s.listOfvisitors)}}function T(i,e){if(1&i){const s=t.RV6();t.j41(0,"div")(1,"div")(2,"div",12)(3,"label",13),t.EFF(4," Filter by status: "),t.k0s(),t.j41(5,"ng-select",14),t.bIt("ngModelChange",function(r){t.eBV(s);const c=t.XpG();return t.Njj(c.FilterStatus=r)})("change",function(){t.eBV(s);const r=t.XpG();return t.Njj(r.onChangeFilter())}),t.DNE(6,k,2,2,"ng-option",15),t.k0s()(),t.DNE(7,E,3,0,"div",5),t.k0s(),t.DNE(8,I,29,1,"div",16),t.k0s()}if(2&i){const s=t.XpG();t.R7$(5),t.Y8G("ngModel",s.FilterStatus),t.R7$(1),t.Y8G("ngForOf",s.statusList),t.R7$(1),t.Y8G("ngIf",0==s.listOfvisitors.length),t.R7$(1),t.Y8G("ngIf",s.listOfvisitors.length>0)}}function O(i,e){if(1&i&&(t.j41(0,"ng-option",17),t.EFF(1),t.k0s()),2&i){const s=e.$implicit;t.Y8G("value",s),t.R7$(1),t.SpI(" ",s," ")}}function P(i,e){if(1&i){const s=t.RV6();t.j41(0,"div",36)(1,"p",37),t.EFF(2,"Update Visitor"),t.k0s(),t.j41(3,"div",38)(4,"label",39),t.EFF(5,"Status"),t.k0s(),t.j41(6,"ng-select",40),t.bIt("ngModelChange",function(r){t.eBV(s);const c=t.XpG();return t.Njj(c.selectedVisitor.status=r)}),t.DNE(7,O,2,2,"ng-option",15),t.k0s()()()}if(2&i){const s=t.XpG();t.R7$(6),t.Y8G("ngModel",s.selectedVisitor.status),t.R7$(1),t.Y8G("ngForOf",s.statusList)}}function S(i,e){if(1&i&&(t.j41(0,"div",41)(1,"p",42),t.EFF(2),t.k0s(),t.j41(3,"div",43)(4,"table",20)(5,"thead")(6,"tr")(7,"th"),t.EFF(8,"Facebook"),t.k0s(),t.j41(9,"th"),t.EFF(10,"Linkedin"),t.k0s(),t.j41(11,"th"),t.EFF(12,"Website"),t.k0s()()()(),t.j41(13,"div",44)(14,"a",33),t.nrm(15,"i",45),t.k0s()()()()),2&i){const s=t.XpG();t.R7$(2),t.JRh(s.selectedVisitor.fullname),t.R7$(12),t.FS9("href",s.selectedVisitor.facebook,t.B4B)}}const N=[{path:"",component:(()=>{class i{constructor(s,n){this.modalServices=s,this.visitorsServicers=n,this.isLoading=!0,this.isError=!1,this.statusList=[],this.listOfvisitors=[],this.tempListOfvisitors=[],this.apiUrl=_.p.apiUrl}openModal(s,n){this.selectedVisitor=n,this.modalServices.open(s,{centered:!0,size:"lg"})}onChangeFilter(){this.listOfvisitors=this.FilterStatus?this.tempListOfvisitors.filter(s=>s.status==this.FilterStatus):this.tempListOfvisitors}getAllVisitors(){this.visitorsServicers.getAllVisitors().subscribe(s=>{this.listOfvisitors=s.result,this.tempListOfvisitors=s.result,this.isLoading=!1,this.isError=!1},s=>{console.log("getAllVisitors err: ",s),this.isLoading=!1,this.isError=!0})}getVisitorsStatusList(){this.statusList=this.visitorsServicers.getVisitorsStatusList()}confirmVisitor(s,n){this.visitorsServicers.confirmVisitor({visitor_id:n,status:s}).subscribe(c=>{p().fire({title:c.message,icon:"success"}).then(()=>{this.modalServices.dismissAll(),this.getAllVisitors()})},c=>{console.log("confirmVisitor err: ",c),p().fire({title:"Error",icon:"error"}).then(()=>{this.modalServices.dismissAll(),this.getAllVisitors()})})}ngOnInit(){this.getVisitorsStatusList(),this.getAllVisitors()}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(F.Bq),t.rXU(C.x))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-visitors"]],decls:12,vars:3,consts:[[1,"p-3"],[1,"d-flex","justify-content-between"],[1,"h2"],["class","d-flex justify-content-center",4,"ngIf"],["class","text-center text-danger fs-small",4,"ngIf"],[4,"ngIf"],["updateContent",""],["contactInfoContent",""],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"text-center","text-danger","fs-small"],[1,"w-50"],["for",""],["name","status",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["class","my-2",4,"ngIf"],[3,"value"],[1,"text-secondary","text-center","fs-small","py-3"],[1,"my-2"],[1,"table","table-bordered","table-hover"],[4,"ngFor","ngForOf"],[3,"ngClass"],["class","m-0 text-center text-success fw-500",4,"ngIf"],["class","m-0 text-center  text-secondary",4,"ngIf"],[3,"href",4,"ngIf"],[2,"text-align","center","align-content","center",3,"ngClass"],["mat-icon-button","","aria-label","Example icon-button with a menu",1,"fs-small","m-0","p-0",3,"matMenuTriggerFor"],[1,"fa-solid","fa-chevron-down"],["menu","matMenu"],["id","item1","class"," p-0 m-0 h-100 d-block px-1","mat-menu-item","",3,"click",4,"ngIf"],[1,"m-0","text-center","text-success","fw-500"],[1,"m-0","text-center","text-secondary"],[3,"href"],["id","item1","mat-menu-item","",1,"p-0","m-0","h-100","d-block","px-1",3,"click"],["id","mat-item-cutom",1,"px-1","p-0","m-0",2,"font-weight","500"],[1,"p-2","bg-white"],[1,"text-center","h3"],[1,"my-3"],["for","status"],["name","status",3,"ngModel","ngModelChange"],[1,"p-3","bg-white"],[1,"text-center","h5"],[1,"row"],[1,"col-md-6","col-lg-6","col-sm-12","col-12"],[1,"fa-brands","fa-facebook","text-primary"]],template:function(n,r){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"p",2),t.EFF(3,"Visitors"),t.k0s()(),t.j41(4,"div"),t.DNE(5,j,4,0,"div",3),t.DNE(6,R,2,0,"div",4),t.DNE(7,T,9,4,"div",5),t.k0s()(),t.DNE(8,P,8,2,"ng-template",null,6,t.C5r),t.DNE(10,S,16,2,"ng-template",null,7,t.C5r)),2&n&&(t.R7$(5),t.Y8G("ngIf",r.isLoading),t.R7$(1),t.Y8G("ngIf",r.isError),t.R7$(1),t.Y8G("ngIf",!r.isError&&!r.isLoading))},dependencies:[l.YU,l.Sq,l.bT,d.kk,d.fb,d.Cp,m.BC,m.vS,f.vr,f.xt,h.iY],styles:[".bg-pending[_ngcontent-%COMP%]{background:#fbfbb7d0}.bg-rejected[_ngcontent-%COMP%]{background:#ebebebe9}.bg-confirmed[_ngcontent-%COMP%]{background:#ceffe0dd}.button[_ngcontent-%COMP%]{background-color:var(--constraTech-dark-blue);border:var(--constraTech-dark-blue);color:#fff;border-radius:5px}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:13px}.mat-mdc-icon-button[_ngcontent-%COMP%]   .mat-mdc-button-touch-target[_ngcontent-%COMP%]{top:0%!important;height:0!important;left:0!important;width:0!important}.mat-mdc-menu-item[_ngcontent-%COMP%]{min-height:100%}#mat-item-cutom[_ngcontent-%COMP%]{font-size:13px!important}#item1[_ngcontent-%COMP%]:hover{color:#00f}.mat-mdc-icon-button.mat-mdc-button-base[_ngcontent-%COMP%]{--mdc-icon-button-state-layer-size: 20px}"]})}}return i})()}];let L=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[g.iI.forChild(N),g.iI]})}}return i})();var D=o(3719),w=o(9631),B=o(2798),X=o(882),A=o(9454);let J=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[l.MD,L,X.vg,d.Cn,D.RG,w.fS,B.Ve,m.YN,f.MQ,h.Hl,A.MY]})}}return i})()}}]);