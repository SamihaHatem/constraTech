"use strict";(self.webpackChunkconstraTech=self.webpackChunkconstraTech||[]).push([[278],{2278:(B,g,i)=>{i.r(g),i.d(g,{WorkshopsModule:()=>V});var a=i(177),f=i(803),u=i(8359),k=i(5668),v=i(8032),d=i.n(v),t=i(7705),b=i(7377),F=i(7886),p=i(9417),m=i(2510);function _(e,r){1&e&&(t.j41(0,"div",15)(1,"div",16)(2,"span",17),t.EFF(3,"Loading..."),t.k0s()()())}function w(e,r){1&e&&(t.j41(0,"div",18),t.EFF(1," We encountered an issue while fetching the requested data. Please try again later. If the issue persists, contact support. "),t.k0s())}function C(e,r){if(1&e&&(t.j41(0,"ng-option",19),t.EFF(1),t.k0s()),2&e){const s=r.$implicit;t.Y8G("value",s),t.R7$(1),t.SpI(" ",s," ")}}function j(e,r){1&e&&(t.j41(0,"div")(1,"p",20),t.EFF(2,"Currently, there is no information to show."),t.k0s()())}function S(e,r){if(1&e&&(t.j41(0,"div",27)(1,"p")(2,"span",28),t.EFF(3,"Tilte:"),t.k0s(),t.EFF(4),t.k0s()()),2&e){const s=t.XpG().$implicit;t.R7$(4),t.SpI(" ",s.title,"")}}function E(e,r){if(1&e&&(t.j41(0,"div",27)(1,"p")(2,"span",28),t.EFF(3,"Description:"),t.k0s(),t.EFF(4),t.k0s()()),2&e){const s=t.XpG().$implicit;t.R7$(4),t.SpI(" ",s.description,"")}}function x(e,r){if(1&e&&(t.j41(0,"div",27)(1,"p")(2,"span",28),t.EFF(3,"Status:"),t.k0s(),t.EFF(4),t.k0s()()),2&e){const s=t.XpG().$implicit;t.R7$(4),t.SpI(" ",s.status,"")}}const W=function(e,r){return{"bg-rejected":e,"bg-confirmed":r}};function y(e,r){if(1&e){const s=t.RV6();t.j41(0,"div",21)(1,"div",22),t.DNE(2,S,5,1,"div",23),t.DNE(3,E,5,1,"div",23),t.DNE(4,x,5,1,"div",23),t.j41(5,"div",24),t.nrm(6,"img",25),t.k0s()(),t.j41(7,"div",26)(8,"button",3),t.bIt("click",function(){const l=t.eBV(s).$implicit,h=t.XpG(),c=t.sdS(20);return t.Njj(h.openModal(c,l))}),t.EFF(9,"Update"),t.k0s()()()}if(2&e){const s=r.$implicit,o=t.XpG();t.Y8G("ngClass",t.l_i(5,W,"Inactive"==s.status,"Active"==s.status)),t.R7$(2),t.Y8G("ngIf",s.title),t.R7$(1),t.Y8G("ngIf",s.description),t.R7$(1),t.Y8G("ngIf",s.status),t.R7$(2),t.Y8G("src",o.apiUrl+s.photo,t.B4B)}}function M(e,r){if(1&e&&(t.j41(0,"ng-option",19),t.EFF(1),t.k0s()),2&e){const s=r.$implicit;t.Y8G("value",s),t.R7$(1),t.SpI(" ",s," ")}}function G(e,r){if(1&e){const s=t.RV6();t.j41(0,"div",29)(1,"p",30),t.EFF(2,"Update WorkShop"),t.k0s(),t.j41(3,"div",31)(4,"form")(5,"div",32)(6,"label",33),t.EFF(7,"Tilte: "),t.k0s(),t.j41(8,"input",34),t.bIt("ngModelChange",function(n){t.eBV(s);const l=t.XpG();return t.Njj(l.selectedworkshop.title=n)}),t.k0s()(),t.j41(9,"div",32)(10,"label",35),t.EFF(11,"Description: "),t.k0s(),t.j41(12,"input",36),t.bIt("ngModelChange",function(n){t.eBV(s);const l=t.XpG();return t.Njj(l.selectedworkshop.description=n)}),t.k0s()(),t.j41(13,"div",32)(14,"label",37),t.EFF(15,"Status: "),t.k0s(),t.j41(16,"ng-select",38),t.bIt("ngModelChange",function(n){t.eBV(s);const l=t.XpG();return t.Njj(l.selectedworkshop.status=n)}),t.DNE(17,M,2,2,"ng-option",10),t.k0s()(),t.j41(18,"div",24)(19,"button",3),t.bIt("click",function(){t.eBV(s);const n=t.XpG();return t.Njj(n.updateworkshop())}),t.EFF(20,"Submit"),t.k0s()()()()()}if(2&e){const s=t.XpG();t.R7$(8),t.Y8G("ngModel",s.selectedworkshop.title),t.R7$(4),t.Y8G("ngModel",s.selectedworkshop.description),t.R7$(4),t.Y8G("ngModel",s.selectedworkshop.status),t.R7$(1),t.Y8G("ngForOf",s.statusList)}}function I(e,r){if(1&e){const s=t.RV6();t.j41(0,"div",29)(1,"p",39),t.EFF(2,"New Workshop"),t.k0s(),t.j41(3,"form",40,41),t.bIt("ngSubmit",function(){t.eBV(s);const n=t.sdS(4),l=t.XpG();return t.Njj(l.newWorshop(n))}),t.j41(5,"div",42)(6,"label",43),t.EFF(7,"Tilte: "),t.k0s(),t.nrm(8,"input",44),t.k0s(),t.j41(9,"div",42)(10,"label",45),t.EFF(11,"Description: "),t.k0s(),t.nrm(12,"input",46),t.k0s(),t.j41(13,"div",42)(14,"label",47),t.EFF(15,"Image: "),t.k0s(),t.j41(16,"input",48),t.bIt("change",function(n){t.eBV(s);const l=t.XpG();return t.Njj(l.uploadImage(n))}),t.k0s()(),t.j41(17,"div",49)(18,"button",50),t.EFF(19,"Submit"),t.k0s()()()()}if(2&e){const s=t.sdS(4);t.R7$(18),t.Y8G("disabled",s.invalid)}}const T=[{path:"",component:(()=>{class e{constructor(s,o){this.workshopsServices=s,this.modalService=o,this.isLoading=!0,this.isError=!1,this.listOfworkshops=[],this.tempListOfworkshops=[],this.statusList=[],this.apiUrl=k.p.apiUrl,this.newWorshopSubscription=new u.yU,this.getAllworkshopsSubscription=new u.yU,this.updateworkshopSubscription=new u.yU}ngOnDestroy(){this.newWorshopSubscription.unsubscribe(),this.getAllworkshopsSubscription.unsubscribe(),this.updateworkshopSubscription.unsubscribe()}openModal(s,o){o&&(this.selectedworkshop=o),this.modalService.open(s,{centered:!0,size:"lg"})}uploadImage(s){this.file=s.target.files[0]}newWorshop(s){const o=new FormData;o.append("title",s.value.title),o.append("file",this.file,this.file.name),o.append("description",s.value.description),this.newWorshopSubscription=this.workshopsServices.addNewWorkshop(o).subscribe(n=>{d().fire({title:n.message,icon:"success"}).then(()=>{this.modalService.dismissAll(),this.file=null,this.getAllworkshops()})},n=>{console.log(n),d().fire({title:"Error",icon:"error"}).then(()=>{this.modalService.dismissAll(),this.file=null,this.getAllworkshops()})})}getAllworkshops(){this.isLoading=!0,this.isError=!1,this.listOfworkshops=[],this.getAllworkshopsSubscription=this.workshopsServices.getAllworkshops().subscribe(s=>{this.listOfworkshops=s.result,this.tempListOfworkshops=s.result,this.isLoading=!1,this.isError=!1},s=>{console.log("getAllworkshops err: ",s),this.isLoading=!1,this.isError=!0})}updateworkshop(){this.updateworkshopSubscription=this.workshopsServices.updateworkshop({_id:this.selectedworkshop._id,status:this.selectedworkshop.status,title:this.selectedworkshop.title,description:this.selectedworkshop.description}).subscribe(o=>{d().fire({title:o.message,icon:"success"}).then(()=>{this.modalService.dismissAll(),this.getAllworkshops()})},o=>{console.log("updateExhibitor err: ",o),d().fire({title:"Error",icon:"error"}).then(()=>{this.modalService.dismissAll(),this.getAllworkshops()})})}onChangeFilter(){this.listOfworkshops=this.FilterStatus?this.tempListOfworkshops.filter(s=>s.status==this.FilterStatus):this.tempListOfworkshops}ngOnInit(){this.getAllworkshops(),this.statusList=this.workshopsServices.getworkshopsStatus()}static{this.\u0275fac=function(o){return new(o||e)(t.rXU(b.x),t.rXU(F.Bq))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-workshops"]],decls:23,vars:6,consts:[[1,"p-3"],[1,"d-flex","justify-content-between"],[1,"h2"],[3,"click"],["class","d-flex justify-content-center",4,"ngIf"],["class","text-center text-danger fs-small",4,"ngIf"],[1,"!isLoading","%%","!isError"],[1,"w-50"],["for",""],["name","status",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["class","card p-2 my-2",3,"ngClass",4,"ngFor","ngForOf"],["updateContent",""],["newContent",""],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border"],[1,"visually-hidden"],[1,"text-center","text-danger","fs-small"],[3,"value"],[1,"text-secondary","text-center","fs-small","py-3"],[1,"card","p-2","my-2",3,"ngClass"],[1,"row"],["class","col-md-6 col-sm-12",4,"ngIf"],[1,"text-center"],["alt","","height","200px",2,"max-width","100%",3,"src"],[1,"text-center","my-2"],[1,"col-md-6","col-sm-12"],[1,"fw-bold"],[1,"p-3","bg-white"],[1,"text-center","h2"],[1,"py-2"],[1,"my-2"],["for","title",1,"text-secondary"],["type","text","name","title","id","title",1,"form-control",3,"ngModel","ngModelChange"],["for","description",1,"text-secondary"],["type","text","name","description","id","description",1,"form-control",3,"ngModel","ngModelChange"],["for","status",1,"text-secondary"],["name","status",3,"ngModel","ngModelChange"],[1,"h3","text-center"],[3,"ngSubmit"],["newcontentForm","ngForm"],[1,"my-3"],["for","title",1,"label-form"],["type","text","name","title","ngModel","","required","",1,"form-control"],["for","description",1,"label-form"],["type","text","name","description","ngModel","","required","",1,"form-control"],["for","file"],["type","file","name","file","id","file","ngModel","","required","",1,"form-control",3,"change"],[1,"text-center","my-3"],["type","submit",3,"disabled"]],template:function(o,n){if(1&o){const l=t.RV6();t.j41(0,"div",0)(1,"div",1)(2,"p",2),t.EFF(3,"WorkShops"),t.k0s(),t.j41(4,"div")(5,"button",3),t.bIt("click",function(){t.eBV(l);const c=t.sdS(22);return t.Njj(n.openModal(c))}),t.EFF(6,"Add Workshop"),t.k0s()()(),t.j41(7,"div"),t.DNE(8,_,4,0,"div",4),t.DNE(9,w,2,0,"div",5),t.j41(10,"div",6)(11,"div")(12,"div",7)(13,"label",8),t.EFF(14," Filter by status: "),t.k0s(),t.j41(15,"ng-select",9),t.bIt("ngModelChange",function(c){return n.FilterStatus=c})("change",function(){return n.onChangeFilter()}),t.DNE(16,C,2,2,"ng-option",10),t.k0s()(),t.DNE(17,j,3,0,"div",11),t.k0s(),t.DNE(18,y,10,8,"div",12),t.k0s()()(),t.DNE(19,G,21,4,"ng-template",null,13,t.C5r),t.DNE(21,I,20,1,"ng-template",null,14,t.C5r)}2&o&&(t.R7$(8),t.Y8G("ngIf",n.isLoading),t.R7$(1),t.Y8G("ngIf",n.isError),t.R7$(6),t.Y8G("ngModel",n.FilterStatus),t.R7$(1),t.Y8G("ngForOf",n.statusList),t.R7$(1),t.Y8G("ngIf",0==n.listOfworkshops.length),t.R7$(1),t.Y8G("ngForOf",n.listOfworkshops))},dependencies:[a.YU,a.Sq,a.bT,p.qT,p.me,p.BC,p.cb,p.YS,p.vS,p.cV,m.vr,m.xt],styles:[".bg-pending[_ngcontent-%COMP%]{background:#fbfbb7d0;border:2px solid #e0e056de}.bg-rejected[_ngcontent-%COMP%]{background:#ebebebe9;border:2px solid #848181e4}.bg-confirmed[_ngcontent-%COMP%]{background:#ceffe0dd;border:2px solid #34f67bc8}button[_ngcontent-%COMP%]{background-color:var(--constraTech-dark-blue);border:var(--constraTech-dark-blue);color:#fff;border-radius:5px}"]})}}return e})()}];let $=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[f.iI.forChild(T),f.iI]})}}return e})();var R=i(8834),N=i(9454),O=i(3719),Y=i(9631),D=i(9115),A=i(2798),L=i(882);let V=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[a.MD,$,L.vg,D.Cn,O.RG,Y.fS,A.Ve,p.YN,m.MQ,R.Hl,N.MY]})}}return e})()}}]);